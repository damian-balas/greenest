(this["webpackJsonprecruitment-task"]=this["webpackJsonprecruitment-task"]||[]).push([[0],{28:function(n,e,t){n.exports=t.p+"static/media/environment.7d63c75e.jpg"},32:function(n,e,t){n.exports=t(58)},58:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),i=t(25),o=t.n(i),u=t(4),c=t.n(u),s=t(29),l=t(5),m=t(6),d=t(9),f=t(8),g=t(10),p=t(11),h=t.n(p),b=t(1),v=t(2);function y(){var n=Object(v.a)(["\n  @import url('https://fonts.googleapis.com/css?family=Montserrat:300,600&display=swap');\n\n  *, *::before, *::after {\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    margin: 0;\n    padding: 0;\n  }\n\n  html {\n    font-size: 62.5%;\n  }\n\n  body {\n    font-size: 1.6rem;\n    font-family: \"Montserrat\";\n    line-height: 1.4;\n    overflow-x: hidden;\n    background-color: #edeadb;\n\n    display: flex;\n    flex-direction: column;\n    min-height: 100vh;\n  }\n\n  button, input {\n    font-family: inherit;\n  }\n\n  #root {\n    display: flex;\n    flex-direction: column;\n    flex: 1\n  }\n"]);return y=function(){return n},n}var x=Object(b.b)(y()),w={primary:"#007562",gray:"#edeadb"};function j(){var n=Object(v.a)(["\n  font-size: 3rem;\n  color: ",";\n"]);return j=function(){return n},n}function S(){var n=Object(v.a)(["\n  height: 10rem;\n  padding: 3rem;\n  max-width: 130rem;\n  width: 100%;\n  margin: 0 auto;\n"]);return S=function(){return n},n}var O=b.d.header(S()),E=b.d.h1(j(),(function(n){return n.theme.primary})),C=Object(r.memo)((function(){return a.a.createElement(O,null,a.a.createElement(E,null,".greenest"))})),k=t(28),I=t.n(k);function M(){var n=Object(v.a)(["\n  color: ",";\n  font-weight: 600;\n"]);return M=function(){return n},n}function z(){var n=Object(v.a)(["\n  font-size: 3rem;\n  font-weight: 300;\n  text-align: center;\n  @media (min-height: 45em) and (min-width: 62.5em) {\n    font-size: 4.5rem;\n  }\n"]);return z=function(){return n},n}function D(){var n=Object(v.a)(["\n  background: url(",") center/contain no-repeat;\n  height: 55vh;\n  min-height: 20rem;\n  max-height: 40rem;\n  @media (min-width: 35em) {\n    max-height: 70rem;\n  }\n"]);return D=function(){return n},n}function T(){var n=Object(v.a)(["\n  padding: 5rem 3rem 0;\n"]);return T=function(){return n},n}var L=b.d.section(T()),P=b.d.div(D(),I.a),_=b.d.h2(z()),F=b.d.span(M(),(function(n){return n.theme.primary})),U=Object(r.memo)((function(){return a.a.createElement(L,null,a.a.createElement(_,null,"Let us save ",a.a.createElement("br",null)," the ",a.a.createElement(F,null,"world")),a.a.createElement(P,null))})),q=t(7);function A(){var n=Object(v.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 0.5rem;\n"]);return A=function(){return n},n}function Y(){var n=Object(v.a)(["\n  font-size: 1.6rem;\n  border: none;\n  padding: 1rem 2rem;\n  border-radius: 0 5rem 5rem 0;\n  background-color: ",";\n  color: white;\n  cursor: pointer;\n  outline: none;\n\n  :disabled {\n    opacity: 0.8;\n    cursor: not-allowed;\n  }\n\n  :hover,\n  :focus {\n    opacity: 0.8;\n  }\n"]);return Y=function(){return n},n}function R(){var n=Object(v.a)(["\n      color: ",";\n      font-weight: 600;\n    "]);return R=function(){return n},n}function G(){var n=Object(v.a)(["\n  cursor: pointer;\n  margin-top: 1rem;\n\n  :hover {\n    text-decoration: underline;\n  }\n\n  ","\n"]);return G=function(){return n},n}function K(){var n=Object(v.a)(["\n  color: rgb(214, 69, 65);\n  padding: 1rem;\n  text-align: center;\n"]);return K=function(){return n},n}function B(){var n=Object(v.a)(["\n  text-align: center;\n  list-style: none;\n"]);return B=function(){return n},n}function J(){var n=Object(v.a)(["\n  text-align: center;\n"]);return J=function(){return n},n}function N(){var n=Object(v.a)(["\n  display: flex;\n  max-width: 40rem;\n  margin: 0 auto 6.5rem;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  flex-wrap: wrap;\n  padding: 0 3rem;\n"]);return N=function(){return n},n}function Z(){var n=Object(v.a)(["\n  padding: 1rem 2rem;\n  border-radius: 5rem 0 0 5rem;\n  border: none;\n  font-size: 1.6rem;\n  outline: none;\n  width: 100%;\n  box-shadow: 0px 10px 40px -15px rgba(0, 0, 0, 0.3);\n\n  :focus {\n    background: linear-gradient(\n        90deg,\n        rgb(197, 218, 139, 0.15),\n        rgb(197, 218, 139, 0.15)\n      ),\n      linear-gradient(90deg, white, white);\n  }\n"]);return Z=function(){return n},n}var H=b.d.input(Z()),Q=b.d.form(N()),V=b.d.label(J()),W=b.d.ul(B()),X=b.d.div(K()),$=b.d.li(G(),(function(n){var e=n.selected,t=n.theme;return e&&Object(b.c)(R(),t.primary)})),nn=b.d.button(Y(),(function(n){return n.theme.primary})),en=b.d.div(A()),tn=localStorage.getItem("country"),rn=function(n){function e(){var n,t;Object(l.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(d.a)(this,(n=Object(f.a)(e)).call.apply(n,[this].concat(a)))).state={activeSuggestion:0,filteredSuggestions:[],showSuggestions:!1,userInput:tn||""},t.handleChange=function(n){var e=t.props.suggestions,r=n.currentTarget.value,a=e.filter((function(n){return n.toLowerCase().includes(r.toLowerCase())}));t.setState({activeSuggestion:0,filteredSuggestions:a,showSuggestions:!!a.length&&r,userInput:r.charAt(0).toUpperCase()+r.slice(1)})},t.handleSuggestionClick=function(n){var e=Object(q.a)(t).handleSubmit;t.setState({activeSuggestion:0,showSuggestions:!1,filteredSuggestions:[],userInput:n.currentTarget.textContent},(function(){return e()}))},t.handleKeyDown=function(n){var e=t.state,r=e.activeSuggestion,a=e.filteredSuggestions,i=e.showSuggestions,o=38===n.keyCode,u=40===n.keyCode,c=13===n.keyCode;if((o||u)&&n.preventDefault(),c&&i)t.setState((function(n){return{activeSuggestion:0,showSuggestions:!1,userInput:a[n.activeSuggestion]}}));else if(o){if(0===r)return;t.setState((function(n){return{activeSuggestion:n.activeSuggestion-1}}))}else if(u){if(r+1===a.length)return;t.setState((function(n){return{activeSuggestion:n.activeSuggestion+1}}))}},t.handleSubmit=function(n){var e=t.props.handleSubmit,r=t.state.userInput;n&&n.preventDefault(),e(r)},t}return Object(g.a)(e,n),Object(m.a)(e,[{key:"render",value:function(){var n=this.handleChange,e=this.handleSuggestionClick,t=this.handleKeyDown,r=this.handleSubmit,i=this.state,o=i.activeSuggestion,u=i.filteredSuggestions,c=i.showSuggestions,s=i.userInput,l=this.props,m=l.suggestions,d=l.errorMessage,f=l.isCountryInvalid;return a.a.createElement(Q,{autoComplete:"off",onSubmit:r},a.a.createElement(V,{htmlFor:"country"},"Find most polluted cities for country"),a.a.createElement(en,null,a.a.createElement(H,{type:"text",id:"country",onChange:n,onKeyDown:t,value:s,required:!0,placeholder:"I.e. Germany"}),a.a.createElement(nn,{type:"submit"},"submit")),c&&a.a.createElement(W,null,0!==u.length&&u.map((function(n,t){return a.a.createElement($,{selected:t===o,key:n,onClick:e},n)}))),f&&a.a.createElement(X,null,"Invalid country, try ",m.join(", ")),d&&a.a.createElement(X,null,d))}}]),e}(r.PureComponent);rn.defaultProps={suggestions:["Poland","Germany","Spain","France"],errorMessage:""};var an=rn;var on=function(n){var e=n.getUTCDate().toString().padStart(2,0),t=(n.getUTCMonth()+1).toString().padStart(2,0),r=n.getUTCFullYear();return"".concat(r,"-").concat(t,"-").concat(e)};function un(){var n=Object(v.a)(["\n  background: #fff;\n  box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.3);\n  border-radius: 0 0 2rem 2rem;\n  padding: 3rem;\n  flex: 1;\n"]);return un=function(){return n},n}function cn(){var n=Object(v.a)(["\n  font-weight: 600;\n  font-size: 2rem;\n  text-align: center;\n  border-radius: 2rem 2rem 0 0;\n  background-color: ",";\n  color: white;\n  padding: 1rem;\n"]);return cn=function(){return n},n}function sn(){var n=Object(v.a)(["\n  display: inline-flex;\n  flex-direction: column;\n  animation: "," 0.3s ease-out;\n"]);return sn=function(){return n},n}function ln(){var n=Object(v.a)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(25rem, 1fr));\n  grid-gap: 3rem;\n  margin: 6.5rem auto;\n  max-width: 130rem;\n  padding: 0 3rem;\n"]);return ln=function(){return n},n}function mn(){var n=Object(v.a)(["\n  from {\n    opacity: 0;\n    transform: translateY(-3rem);\n  };\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  };\n"]);return mn=function(){return n},n}var dn=Object(b.e)(mn()),fn=b.d.div(ln()),gn=b.d.div(sn(),dn),pn=b.d.span(cn(),(function(n){return n.theme.primary})),hn=b.d.span(un()),bn=function(n){var e=n.cities;return a.a.createElement(fn,null,e.map((function(n){var e=n.pageid,t=n.title,r=n.extract;return a.a.createElement(gn,{key:e},a.a.createElement(pn,null,t),a.a.createElement(hn,null,r))})))};function vn(){var n=Object(v.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.9);\n  color: white;\n  height: 100vh;\n  width: 100vw;\n  text-align: center;\n  font-size: 2.5rem;\n"]);return vn=function(){return n},n}function yn(){var n=Object(v.a)(["\n  ",";\n  margin: 3rem auto;\n  font-size: 1rem;\n  position: relative;\n  text-indent: -9999em;\n  border: 2rem solid rgba(0, 117, 98, 0.2);\n  /* border-right: 1rem solid rgba(0, 117, 98, 0.2);\n  border-bottom: 1rem solid rgba(0, 117, 98, 0.2); */\n  border-left: 2rem solid ",";\n  transform: translateZ(0);\n  animation: "," 1s infinite linear;\n\n  ::after {\n    ",";\n    position: absolute;\n    top: 0;\n    content: '';\n  }\n"]);return yn=function(){return n},n}function xn(){var n=Object(v.a)(["\n  border-radius: 50%;\n  width: 12.5rem;\n  height: 12.5rem;\n"]);return xn=function(){return n},n}function wn(){var n=Object(v.a)(["\n  0% {\n    transform: rotate(0deg);\n  };\n  100% {\n    transform: rotate(360deg);\n  };\n"]);return wn=function(){return n},n}var jn=Object(b.e)(wn()),Sn=Object(b.c)(xn()),On=b.d.div(yn(),Sn,(function(n){return n.theme.primary}),jn,Sn),En=b.d.div(vn()),Cn=function(){return a.a.createElement(En,null,a.a.createElement(On,null),"Fetching Data...")};function kn(){var n=Object(v.a)(["\n  color: white;\n  text-decoration: none;\n  font-weight: 600;\n  :hover {\n    text-decoration: underline;\n  }\n"]);return kn=function(){return n},n}function In(){var n=Object(v.a)(["\n  color: white;\n  max-width: 130rem;\n  margin: 0 auto;\n"]);return In=function(){return n},n}function Mn(){var n=Object(v.a)(["\n  min-height: 10rem;\n  margin-top: auto;\n  background-color: ",";\n  padding: 3rem;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return Mn=function(){return n},n}var zn=b.d.footer(Mn(),(function(n){return n.theme.primary})),Dn=b.d.span(In()),Tn=b.d.a(kn()),Ln=function(){return a.a.createElement(zn,null,a.a.createElement(Dn,null,"\xa9 2019 Damian Balas ",a.a.createElement("br",null),"Thanks for using this app \u2764\ufe0f ",a.a.createElement("br",null),"Save the world and plant some",a.a.createElement(Tn,{href:"https://teamtrees.org/",target:"_blank",rel:"noopener noreferrer"}," ","trees"),a.a.createElement("br",null),"Image created by",a.a.createElement(Tn,{target:"_blank",rel:"noopener noreferrer",href:"https://www.freepik.com/free-vector/environment-concept_799751.htm#page=5&query=pollution%20earth&position=46"}," ","freepik")))},Pn=function(n){function e(){var n,t;Object(l.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(d.a)(this,(n=Object(f.a)(e)).call.apply(n,[this].concat(a)))).state={isCountryInvalid:!1,isLoading:!1,cities:[],errorMessage:""},t.getPollutedCities=function(n,e){var t,r,a,i;return c.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t="https://api.openaq.org/v1/measurements?country=".concat(n,"&parameter=pm25&sort=desc&limit=500&order_by=value&date_from=").concat(on(new Date)),o.next=3,c.a.awrap(h.a.get(t));case 3:return r=o.sent,a=r.data.results,i=new Set,a.some((function(n){return i.has(n.city)||i.add(n.city),i.size===e})),o.abrupt("return",Object(s.a)(i).map((function(n){return n.includes("/")?n.substring(0,n.indexOf("/")):n})));case 8:case"end":return o.stop()}}))},t.getCitiesDescription=function(n){var e,t;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e="https://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&explaintext&redirects=1&exsentences=2&format=json&exsectionformat=plain&origin=*&titles=".concat(n),r.next=3,c.a.awrap(h.a.get(e));case 3:return t=r.sent,r.abrupt("return",t);case 5:case"end":return r.stop()}}))},t.handleSubmit=function(n){var e,r,a,i,o,u,s,l;return c.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e=t.props,r=e.COUNTRY_MAP,a=e.CITIES_LIMIT,r.has(n)){m.next=5;break}t.setState({isCountryInvalid:!0}),m.next=23;break;case 5:return t.setState({isLoading:!0,isCountryInvalid:!1}),m.prev=6,localStorage.setItem("country",n),i=r.get(n),m.next=11,c.a.awrap(t.getPollutedCities(i,a));case 11:return o=m.sent,u=encodeURI(o.join("|")),m.next=15,c.a.awrap(t.getCitiesDescription(u));case 15:s=m.sent,l=Object.values(s.data.query.pages),t.setState({cities:l,errorMessage:"",isLoading:!1}),m.next=23;break;case 20:m.prev=20,m.t0=m.catch(6),t.setState({errorMessage:m.t0.message,isLoading:!1});case 23:case"end":return m.stop()}}),null,null,[[6,20]])},t}return Object(g.a)(e,n),Object(m.a)(e,[{key:"render",value:function(){var n=this.handleSubmit,e=this.state,t=e.isCountryInvalid,r=e.errorMessage,i=e.cities,o=e.isLoading;return a.a.createElement(a.a.Fragment,null,a.a.createElement(x,null),a.a.createElement(b.a,{theme:w},a.a.createElement(C,null),a.a.createElement("main",null,a.a.createElement(U,null),a.a.createElement(an,{errorMessage:r,isCountryInvalid:t,handleSubmit:n}),o&&a.a.createElement(Cn,null),0!==i.length&&a.a.createElement(bn,{cities:i})),a.a.createElement(Ln,null)))}}]),e}(r.PureComponent);Pn.defaultProps={COUNTRY_MAP:new Map([["Poland","PL"],["Germany","DE"],["Spain","ES"],["France","FR"]]),CITIES_LIMIT:10};var _n=Pn;o.a.render(a.a.createElement(_n,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.9ec2729a.chunk.js.map